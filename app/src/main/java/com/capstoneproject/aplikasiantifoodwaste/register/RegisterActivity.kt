package com.capstoneproject.aplikasiantifoodwaste.register

import android.content.Intent
import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.text.Editable
import android.text.TextWatcher
import android.widget.Toast
import com.capstoneproject.aplikasiantifoodwaste.custom.*
import com.capstoneproject.aplikasiantifoodwaste.databinding.ActivityRegisterBinding
import com.capstoneproject.aplikasiantifoodwaste.home.HomeActivity
import com.capstoneproject.aplikasiantifoodwaste.login.LoginActivity
import com.capstoneproject.aplikasiantifoodwaste.profile.Users
import com.google.firebase.auth.FirebaseAuth
import com.google.firebase.database.ktx.database
import com.google.firebase.ktx.Firebase

class RegisterActivity : AppCompatActivity() {

    private lateinit var auth : FirebaseAuth

    private lateinit var binding: ActivityRegisterBinding
    private lateinit var customButtonRegister: CustomButtonRegister
    private lateinit var customEditTextNameRegister: CustomEditText
    private lateinit var customEditTextEmailRegister: CustomEditTextEmail
    private lateinit var customEditTextPasswordRegister: CustomEditTextPassword

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityRegisterBinding.inflate(layoutInflater)
        setContentView(binding.root)
        supportActionBar?.hide()

        auth = FirebaseAuth.getInstance()

        customButtonRegister = binding.customButtonRegister
        customEditTextNameRegister = binding.customEditTextNameRegister
        customEditTextEmailRegister = binding.customEditTextEmailRegister
        customEditTextPasswordRegister = binding.customEditTextPasswordRegister

        setMyButtonEnable()
        customEditTextEmailRegister.addTextChangedListener(object : TextWatcher {
            override fun beforeTextChanged(s: CharSequence, start: Int, count: Int, after: Int) {
            }
            override fun onTextChanged(s: CharSequence, start: Int, before: Int, count: Int) {
                setMyButtonEnable()
            }
            override fun afterTextChanged(s: Editable) {
            }
        })
        customEditTextPasswordRegister.addTextChangedListener(object : TextWatcher {
            override fun beforeTextChanged(s: CharSequence, start: Int, count: Int, after: Int) {
            }
            override fun onTextChanged(s: CharSequence, start: Int, before: Int, count: Int) {
                setMyButtonEnable()
            }
            override fun afterTextChanged(s: Editable) {
            }
        })
        binding.labelLoginAccount2.setOnClickListener {
            startActivity(Intent(this, LoginActivity::class.java))
            finish()
        }
        customButtonRegister.setOnClickListener {
            //val name = binding.customEditTextNameRegister.text.toString().trim()
            val email = customEditTextEmailRegister.text.toString().trim()
            val password = customEditTextPasswordRegister.text.toString().trim()
            val name = customEditTextNameRegister.text.toString().trim()
            registerUser(email, password, name)
        }
    }
    private fun setMyButtonEnable() {
        val resultEmail = customEditTextEmailRegister.text
        val resultPassword = customEditTextPasswordRegister.text
        customButtonRegister.isEnabled = (resultEmail != null && resultEmail.toString().isNotEmpty()) && (resultPassword != null && resultPassword.toString().isNotEmpty())
    }
    private fun registerUser(email: String, password: String, name: String){
        auth.createUserWithEmailAndPassword(email, password)
            .addOnCompleteListener(this){
                if(it.isSuccessful){
                    startActivity(Intent(this@RegisterActivity, LoginActivity::class.java))
                    finish()

                    val user = FirebaseAuth.getInstance().currentUser
                    val uid = user?.uid
                    val userDetail = Users(name, email, "-", "-", "/9j/4AAQSkZJRgABAQAAAQABAAD//gA8Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2NjIpLCBxdWFsaXR5ID0gMTAwCv/bAEMABQUFBQUFBQYGBQgIBwgICwoJCQoLEQwNDA0MERoQExAQExAaFxsWFRYbFykgHBwgKS8nJScvOTMzOUdER11dff/CAAsIAoACgAEBIQD/xAAdAAEAAgMAAwEAAAAAAAAAAAAACAkFBgcCAwQB/9oACAEBAAAAAJdgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAennnPNTxLKbT0Ho/0gAAAAAAAAAAfnG40cNw2e27MMVqeu5Ptkle3+YAAAAAAAAABy6EPLe2SE7Jtn6Gs8ej7wrf5udjAAAAAAAAAB+RHhz3SaG9gA1CG8dJXzP9gAAAAAAAAB+QdjVOqRwAA4VAXt8+/aAAAAAAAAAiLEGxXsYAAOZ1uyTm2AAAAAAAABy2tGecjQAAHEa67FO3AAAAAAAAB+VpbHYWAAAIKcgtF9oAAAAAAAA5BW3aLvwAAA1mqufUgAAAAAAAABA/UbHgAAAQCxdiIAAAAAAAB+VPzAlCAAADgEBrbfrAAAAAAAAafVRaH0QAAAGuVOWa9RAAAAAAAAcVrpt2+oAAACpebkjAAAAAAAAEcYVWxgAAAKvZJyvAAAAAAAARkiJasAAAArN7pL4AAAAAAABGmHdrQAAACsaQUtwAAAAAAAHAYFW4+QAAAFVctZPgAAAAAAAOXVlW0Z4AAAHoqKsK7kAAAAAAAAxVSNkXYQAAAc/q4tU3MAAAAAAAAq5kbLkAAAEZ4Y2yeQAAAAAAABB/nNkwAAAK+fbYCAAAAAAAAONVx2sbSAAAMXU/O6QwAAAAAAAA9VV0l5fgAACMUL7XvvAAAAAAAACJcULU8gAAA9NXXdpqgAAAAAAAAxVV0qZegAAIyQltQ2UAAAAAAAACMEKLQN2AABrlXMqZgAAAAAAAAAPCtv5LKPqAAHhXXq1mv1gAAAAAAAAGp1j9snr5gAEJ4zWY9AAAAAAAAAADlNcMhZ0+4AHjDCKlhvbwAAAAAAAAAORV4dNnvtAAwcEeJ2Bd0AAAAAAAAAANFr+0yXEoMsDHxqiBmp/wDSwAAAAAAAAAA+eLMSMd2vq22fuscs4l5Stll9wAAAAAAAAAAD4uD8O5nrP5sfSO3d9yYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB46Dy7n2n4D4G+zT2AAGJhjzPx+7Pbdv8A1DovsAAAAAAAPDjsduF6zsnQdz2HII8a5LyTeSAfFHCHv0yU8vgwGnc91nO9vkP233AAAAAAD542RP0nsvfe07p5B8cVIm+juvZOhbF+4DQOPcH9Ep5b5IPzUeMcE4nssrZO/cAAAAABw+EWtyglHtwAY/gHBeS654vLO9X7xIPLgBrcYor/AHzWkIAAAAAMdB+N0mpkbAAAGGwXjm86AAGIiFFTu87c2AAAABqNduHnz18AAAAAAHMoBemxLfgAAAA0et3b7CthAAAAAAAYqAHK7HelgAAAGtVn7tYh94AAAAAAA+eAnHrLd3AAAA9Fbfw2T5IAAAAAAAHzVz67ZnkAAAARBihZ7uAAAAAAAADAVg9/m8AAAGoVbThkuAAAAAAAAOE16Wc9IAAAEGOU2deYAAAAAAAAVv5iwgAAAxVT07JFAAAAAAAAA4rXRattYAACO0GLY/tAAAAAAAAB4VUSwlUAAAghgLDgAAAAAAAAEEtcsQAAAVk93l+AAAAAAAAAjDEa1cAABU/M+SIAAAAAAAADiFd1v/6AABUfPCQAAAAAAAAADj1bFwPvAAAqOnjIAAAAAAAAABx6ti4H3gAAVHTxkAAAAAAAAAA49WxcD7wAAKjp4yAAAAAAAAAAcerYuB94AAFR08ZAAAAAAAAAAOPVsXA+8AACo6eMgAAAAAAAAAHHq2LgfeAABUd3LoIAAAAAAAADTozXA+8AACA2mAAAAAAAAADOWHeQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf/xAA6EAAABgEDAgQBCwMDBQAAAAABAgMEBQYHAAhWERcSGEBQFBATFRYhIjAxNDU3ICNBM2CQJDI2QnD/2gAIAQEAAQwA/wCUNw5btEjLOV00UpbL+N4UTFc2xmdR/udx+1EQas5V4LndYw/JrT1x0fdc9/8ASlo6Luuff5paGm261n9nxVOVDTDc/QnAgDuNlmoxOZ8aTAlBG1NkTtHjR+iVZm6RXS/2GYQKAiIgAXDOtDqYqoFfjJvbPuUu8sJ04ZJvDoS9hnZ9YVpWYdvD6YVWzyvT6Prsk601w5k12ACSnPiaJgPKZw6hXADR8BZTIHX6ugOnWGcnNAET094fUhT7ZFdRf1mUagICURAQ6DGTUvDLgvGyblorWtx1+hhInJHQl29Q3A0SzCk3eOBiHiaiayZVElCnJ7/kDLdVx+kZN2v8VJ3jMlzvB1Ul3wso5FFZwqRJFI6qtU2/X+xgku6aEiWle2y0uNAh5h67lVYeh0yAAoRlZj0DFKUoABSgAf0CACAgIdQl6ZU54ohJ1yPdDYNtVDlAOeMUdxS1q26XuABReOKjMNnTR0yXUbu2yqC9JypcKIqQI2RMqyx3murXwEmhjhHS/vgmAoCJh6BljcGDYXMHTHAGVcOHDxdVdwuosvjzAdmuAIP5XrExVPxrT6OiQsREJA4/EtdDql0bCjNw6K58hbd5+tgu/rpzy0cAqt1QMUTJq4o3CLshbQlzcCq2RWScJJrIqlUS95MIFAREQAM2ZsVnFXVarLrwxcbHPpd81YMGijh1ivAkXViNpaxppvpj0GUMHwl4TcSUYCbCdnYKVrcm6i5Zmds7wzmZzTXKEJOLnVgUF0XSKS6CpVEfeNweWBbgvTINz0UjY17MP2sewbHXd4mxNH47j/iXAEcTnosmYyh8ixBkVylQk56BlKxLPImVaig72/ZZGLctqfNuR+C93y5f0sf1Rw6SOX6TcLrvHC7hdUyi2BMVkq0WSxy7YPpj0ma8XJXyDF6wQAJ0xVUFTFMBk1MG5G+vFZBo+WAZf3UTAUBMIgAZkvJ7xcnyyKojHYDx4Fws4yj9DxRXptx2PAg5hO0x6AFY41uS9Ft0ZLkMPw7dwi6boOEFAOj7pnC3fVKgyRkVfA9TTUXUImmQTHxlT0qRTYiJAgA59Ncqy0t9Zl4N0UPDIsHMW/ex7tMSONulvGwUn6LcK9Xfum5uyDI29jBpqf2sC1YLNkKOUWT8TX1G5OrBC3VCXRTAqG3myDBZDZszqdG3uZjFKBjGEAC5zR7Ha7BLGMI62uwAM6xNzZyff9RuQgAlsfHfkJ1Wi360VJx8ggborHvUpFgyeoD1S9yyDKDC0e1yAG6H1iaJCFxzUmng8JvUXCKLOVSxxhigOhASiICHQcLyoy2M6oqYRE/uW4J8LPF00UB+1qiLly3QD82LcrNizbEL0L6gQAQEBD7LUy+jbRZGH5a2xPhc4+etx/P3LdAuKWPo5PVObg7t1Wb+ry23+GyVdCa2qL9YW2t/c903/hMDrHf8gUX1ebSlJlG3dNbUjj8xcif49y3SpiNEhVP8UFUEb1S1R/L1WZVQVyfcRDW1NMfgLir7nuTai4xoqpqEcC0mohz/AJIYDlKcPy9TkV2D6/XRcB6l2sNRJT7C69zzSwGRxjbUwD7QEQEBD7BqsgWVrNefgID6l0uVq1cuDCAFfuRevnroR+3bswFljGOUEOg+5T0cWXhJeNMACCqZ0VFEjh0NgeWCWxjXvvdT+oyrLBC48tzzxeE2sdRYwtEqbAQ6H9zypCjX8hWtgBPCTatOeNnaYI5/t9RufnAZU+KiCn6HqcQefs0DElAR0UpUylIQoAX3PdHXxaz8FPJk+5guxBXcjwgqKeFD1G4+xhM34Y5M/VHbXADKX40mcnVL3TPFZGx46lTJp+Jyguq3WRXSMJVKTYkrZVIKaSMAj6aclmsDDyks6MAITEm4mpWRk3I9V9ttZGGoykosn0X90WRScIqoqkA6d+rCtPt85CnKIE2vXABSl6k5V+3025m4BGVxjWm6vRxXYR1Y52Jh2hRFaKjW0PFx0a1J4UPddz1MFwxjLa0S+/ULI7qNkiZxp/qRUmzmoxhJsVgUbekcOEGiC7hdUqaOSbereLjLzIib4fbDTBdSMlbXSP8Aa92nIdlYYeSiXyfjbWquvanYJWEelEFdtF/A6Lilv1vv+k3IX8IaDTqrFfo9iIt5OSkfFsUhUdU6tNKhWoiDah9z3fcfjwZmITtkch1eRMo9hZJlJMFxRd4/uzC+1plMNRAqvorZaIynQD+akj9ELLYpG1zkjNSKnic7aseCQFbrIoe8qpJrJqJKkA6eY8bq0CyKC2SMMPibJDnHdhIucTqRTF80k2bV8zcEXbegVVSQSUVWUKRPNeUD32c+CYKiEHjCgvMhWZvHEAxGLBi0jGTVkzQKi295u1Oi7zX3kLIl6FtVYlqfOPYaUQFNxg7MA1FynXpxcRhE1E1k01ElAOT8b8uoiOs8ZjCVF1Uq656soWGkrDKMoqMbGXeY3oMfj2uIxjfwqOve8rYvj8jQ3hDwIS8vEyMFJPIySaHbO8MZuUqwoV6yLnUh27hu8bouWyxFUfxDnImQx1DAUmZ87C+B3Wqk7EG7Jk7kXbdmzQOu4w3iVtj+N+OfkIrPe+5UxNFZFYCqTwNZqfr8vV5RzFS7M7Z3jDMs7j5YjNfxPoSqXKvXWOLIQkgVdP8ACsNlg6rGqyUzIJtG2Us5S93FeKifGwg4qKkJqQax0c0Ucu8Q4bY0FuSTkgI5n/f73jyvZBjPg5Vv0XyDiyzY9dG+Ob/Px8HPzNafpSEPIqs3VG3Ns1wSZ3BiKCsNPwthaFdxEo3eof1SctFwrU7uTkEGje77mIZgVVpU2gv3Nktc/bpAz+bklXS9HxzZr+/BvEsxBDHWLa9jpj4WZPn5H/YLto1fN1mztumuhfdtLB8Kz6nOAZrWGp2OqOhazkO4ZqRkvKQzkrqNkV2i8BuNyJEgRN6u1lEo3dXGnAAk6m4SFHc5js5QE7SXTFXc3jpMBEjeXU1I7qoYgCEbVXa4zu5TIEoByRwM4skvPTU+5FzLyrl6tCV2csjsrOHinL1ehbZgKKL65ugNqNjI+HZIMY5ki1a/7EkI2OlmyjWQYIO29m220aZFRWLO4h15vbJeGAnGLesZJORxLkiLEwL09+YFapaEDiVWtyZDJ1azqmAqdckziwxVkWSEoIU6SDULtpv8gJBkVWManWts1NihTVmXrmXViYWIgmpWkVGtmbf/AOtnORMpjnMBSzWVMewAmK+tbL52V3PUVoJyMI6TfHf7q5MREI6pNk9O9zGRXAj8ynGNtL5/ymsI+GxES0fOGVDj1G3r6Jm/KhB6hcF9Uvcjaot+QtnMEowrdpgbdGpyMJIpOkPxJudiK5HryMu/SaNb7uSnX7wW9PH4BkfOOVFBARt6+gzdlMBAfrg40jn3KiX52UFNNNyuSEBD54Y1xphuqmidAkaozV1FboqY58JJGHk2ZobL+OJ3wFa2poRRFZJwmVVFUiiftqiiaKZlFFCkJas74+rAqJEkhk3Vk3OW2QE6cEwbRaU5cbTZDieYn3jv5Iuo2qbEoRlckXYR2A8oSHQfq+DYGe127K/a6l4lDSG1J+P6i4oF0G1BH/N5Po+1BLwj4LwYTXrGtnx+8FKUZidpXrNPVR+SQhZNVo4pG5qNeAgztzL4RaKmYmcakdxUk2eN/wACQko+KbKO5B8g1b3fcrARRVmlXbfSbu03KyXR8L2ck1HKlOodlvUgDOFYGUBHaiApkFa7iCg7T0ecn0vtSegH9i5Ijp3tcuaX6Wbil9SG3/KDABEINN0WUpVvhBH6SrEk2KPUNQ1nsVeVBWIm3jM1c3LXeLFNOYQay6NV3B0CxCmi7dniHLdw3dIprN101kvaHbxowbquXblJBC7bla9ECq0rLQZVzbMlXO6KH+l5tUyCKCzlUiKCJ1VaxgTIdjBNVWNLGNa9terDMCHnZl1InhMb0WugQY2rMEjlKUhQKQoAX+l/HsZRouyftEXLa+7Z27gV31NdggefrE/V3Zmc1EuGa0TOzMA5B1EyrlktXdy14igTSlWzWWSh90FLdgUJSKfsDsc24vfgHgtiCekcjUFbp4LlD6VyJQkevjuUPp7mnGDADCpbmp9S+5yjMgMEawfvz2Dc7cZEDkho1pFEnLPYLK4FxMzDp6pDwUxYHhGcRGOHriibZVjGQfXJ4BCxENFQLFFhFR6LRr/SIAICAh1CaoFLsIG+lKywXPP7Yqe/A54aSdxaln285BgAUWaNUpZs7ZvGC527xqq3XrF8ttOWBSEml25aVubi3wotLYw+BWjZOOmGiTyOfIOm3suRc6VikfPsWYhJzFzyNbL25FWYkzihDwktYHyTCJjlnjql7YnjgEnVukvhSVmiVKnolThYNs2P+HJxMXMtTtJOObvG1o20U2WFRaFduIhee245EihOZgi1lUZWn2qDEwSddftQEBKPQQ6fKACI/YHXUZV7JNGAsZAvnWoHbvkiXEh3TBCMRrO2OrRwprT0k4lFYaAhK81BpERTZkh+HYqhWbW3FCbhWrwLntgDoq6qMpqfrM/VnpmM1FLs16peLPSnoOoOUUQ1jrcBXrWKEfOASKlQEBABAQEPYZaWjIKPcyMm9TatMn7gpWxi4iawKjCLTIquqUhCGUUx7txlpoEJG1qHjWVcqtfqTErKEi0WiPoXlcr7/qLyDYr6Uxrj1br46TDCKeM8eI9PBSYbTSr1ph0FpX49DQABQAADoHoJuAhbGxOxmIxB42yFtrdsgXkKaud0i6auWThZs6QOivjLO87TBbxswKklC1+xQ1pi28rDviOWvr7pd4GiRCknMOfCGQ8mT+RJEVnyvzLGn0iw3mTLHQrMVDY3w3W6Aki68APpn2rIWKqzkJsYXiHw8le8dWPH0j8LLN/EhR77YKBKlfxDn7mP8iwGQ4r4yOU+bc+tv19hsfQasnIH8atyuc5eZlaWl3HiPi/E0zkV8Cv32kNWKtB0+KQi4ZiVu29sm4OJsca5jJZim6Z5YwzKUFdSRYAd5A1uyTNTlm0tDvDN3eM8mRGRoj59DwoSXq7dbImlwTyZlVgKjeLrMXydcS0mprEeJH+QpD4p0B28FFxbCFYNY6OaJtmntzpo2fNl2rtAizfM+G1qS4PNQqZ1YGr2eXqE0zmIlyKTmgXqKv8AAN5ViIEV9S6ct2TZdy5VIkhl7JbnIVhOKJzEh8XY3f5FniNSeNGNiIiNgY1pGRrQjdn7g8ZtZBq4aO25F22YcWOceTALtCnUg8aX+Qx7Y0JFATHZRMoxm41lJx7gqzT1G5HJApAWlRi/216CkbNMx8NGo/OOqLTIyiV1nDMC9fc7RWou2wb+Gk0fG3udTkqTYZCEkS/3NuORxi5H6nyS/wD0fp73bGtJq0rNuOgmk5F5LP3sg9WFV1t1x2EFCfWiQQ6P/dM847C5Vg8myQAZZFZVsskskcyauKrunfKfHyRjh8d6bcxdBk7A0q7Vbq2xRSj3q5xsacg/BJpkRTIkmQCE90/PrrOVH+pl0cnao+CN283Ma3dCRThbow9LPS7aAhZWXdf6MvJupmUkJJ2fxuNt1QCEpys4ul0d+7Z5qAWmhPl0Uur1BZVssiuicSK0axp22pQM2QQ8XpNythGKoqEWkfotAxK87NRMSh9qsYwbxUcxj2xAIh7sommsmokoUDEvdeNVrfYYbwiCe1uwi5g56AUP1N6TdBMC8uUTFgb7m3SDCWyM2dHJ1T943QQgMrhEyxC9C7dJgYvJLJsJhAnpM0SAyWTrcr16htTjQBK4SYh7zukjQXqUC/APtoEgMVeKm9Aenpbq4F1cLSsP57YG4JUOSW/z7xuIbAviyZU02XM2ct1yf9wGAwAYBAQ9HYBEZ6b1tp/jUvvOfv4ltnyNP0rb0k/++zettP8AGpfec/fxLbPkafpW3pJ/99m9baf41L7zn7+JbZ8jT9K29JP/AL7N620/xqX3nP38S2z5Gn6Vt6Sf/fZvW2n+NS+85+/iW2fI0/StvST/AO+zettP8al95z9/Ets+Rp+lbekn/wB9m9YyzsljyshCGrBnw+bBDgymvNghwZTXmwQ4MprzYIcGU15sEODKa82CHBlNebBDgymvNghwZTXmwQ4MprzYIcGU15sEODKa82CHBlNebBDgymvNghwZTXmwQ4MprzYIcGU15sEODKa82CHBlNebBDgymvNghwZTXmwQ4MprzYIcGU15sEODKa82CHBlNebBDgymvNghwZTXmwQ4MprzYIcGU15sEODKa82CHBlNebBDgymvNghwZTXmwQ4MprzYIcGU15sEODKa82CHBlNebBDgymvNghwZTXmwQ4MprzYIcGU15sEODKa82CHBlNebBDgymvNghwZTXmwQ4MprzYIcGU15sEODKa82CHBlNebBDgymvNghwZTXmwQ4MprzYIcGU15sEODKa82CHBlNebBDgymvNghwZTWQdwaN4qEvXQqh2Y6afpW3pL1gG9JWWTWg4wJFh2JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTXYnK/EVNdicr8RU12JyvxFTUBt6yJIyrVCUiQjWRCFTIUhQ+7/AMlP/8QAURAAAgECAQUJCgkKBQMFAAAAAQIDAARBESExUdMFEkBCUGFxdHUTFCIjYnKBkrGzEBUyUmOCkaGyICQwM1Ngc6K0wkODk8HSNJCUVHCjw+P/2gAIAQEADT8A/wC6GvynkYKo6SxAocS3JnP/AMQNYFIURP53Fa5LkCuuH/ZK64f+FfR3VazFHIn8r0eJdZbf3gAo6HicOvoKk/uIASSaX/AsiJACMHf5IrAoBPN60la55Wf4PoLWWT8INfSgRfjIrnuIq5rmKvot7L+A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Tk973kYJhmA1HA0xAuLZ88U6jBxUQAurNz4yFv8AddR4c2VLW1VgJJ5NQo5oYVzRwR4IgqFx3zeEadccWt6TTi7tizsdJ5NmXI8Tj7wRoIwNSP4M2l7YtoSWosRnVlOlHGKmoABeWZOdCeOutDwyFfATjyyHRGnOazpbwA+BBFgi1buBPPjMcYoqt0CRRRjIFA5PmQpJHIAysrDIQQdINTvnTSbN2wbyKgb6siHSjjFTWZLq2JBeCUYHhUMbSSSMciqqjKSTgBVmzJYw69czc7VbEPfXXzEwVfLareMJFGgzAD2k8ozoUlikUMrq2Ygg4GrxybSY5zG2ML1KRHfW2EsX/IYVdRLLDIuKtwlgJN03U+lIau5QiDAYljzAZzSDf3E3Gnmb5TnlO5QgnjIw0OvlCoGyxyDRLE2dZF6RV65awY6I58Y+iThEEREEf7Sd8yLV1M80znF3OU1umg71B0xWp2nKu5Ubyxa5YdLx1E4dHGYqynKCKhAt75NU6DO3Q3B9ywJbnnuJR/YtRHvi9OqGPDpao1Coq6AAMgA5hytunvrq11KePH9U1uyBA2pZxniPBrK2knfnEa5clXc7zSnynOWt2XDgnC3iJCcr7lZbyDzE/WionDowzFWU5QRV3aqZgOLKvguPQRwXdW8SNueGLw2q9u4bdOmVguWrWCOCNRgsa70crupVlOIIyEHpq1vJBDzwscqH0qas7kXUPmT8FsNzwT587VubazXP1yBEvLO6FiFfne3Nbo2s9sfej8HBY7sQD/IQR0WtrZPvduWbTdEp9WdKi3TtsvQzgHgr7qXfvDU26sn3Ig5ZgubOX7ZglRSK46VOWiBkI4J39ce8NfGd1yz+Zf1cXwdyT2cE7+uPeGvjO65Z/Mv6uL4O5J7OCd/XHvDXxndcs/mX9XF8Hck9nBO/rj3hr4zuuWfzL+ri+DuSezgnf1x7w18Z3XLP5l/VxfB3JPZwTv6494a+M7rln8y/q4vg7kns4J39ce8NC6ln7sLsRfL5t41doDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlXaA2VdoDZV2gNlV53Hx5vO67zuUyy6N4Pg7kns4JczyTwuk8SMgkJO8cSFa61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSutW20rrVttK61bbSi47vcvPE5VOYRs1KAB0AZB/wByr//Z")

                    var database = Firebase.database.reference
                    if (uid != null) {
                        database.child("Users").child(uid).setValue(userDetail)
                    }
                }else{
                    Toast.makeText(this, it.exception?.message, Toast.LENGTH_SHORT).show()
                }
            }
    }
    override fun onStart() {
        super.onStart()
        if(auth.currentUser != null){
            startActivity(Intent(this@RegisterActivity, HomeActivity::class.java))
        }
    }
}